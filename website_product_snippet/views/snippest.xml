<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Snippet's Body -->
    <template id="s_latest_products" name="Product Slider">
        <section class="s_latest_products oe_website_sale">
            <div class="container">
                <h2 class="text-center title">Latest Products</h2>
                <hr />
                <div class="js_get_products" data-loading="true" data-template="website_product_snippet.media_list_template" />
                <hr />
            </div>
        </section>
    </template>
    <!-- Latest products's Template -->
    <template id="media_list_template">
        <t t-if="not products">
            <t t-call="website_product_snippet.no_products" />
        </t>
        <t t-if="products">
            <div class="owl-carousel owl-theme owl-loaded loading_container s_latest_products_product">
                <t t-foreach="products" t-as="product">
                    <div class="item">
                        <t t-set="product_href" t-value="'/shop/product/' + slug(product)" />
                        <t t-set="combination_info" t-value="product._get_combination_info(only_template=True, add_qty=add_qty or 1, pricelist=pricelist)" />
                        <form action="/shop/cart/update" method="post">
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                            <div itemscope="itemscope" itemtype="http://schema.org/Product">
                                <div class="oe_product_image">
                                    <a itemprop="url" t-att-href="product_href">
                                        <span t-field="product.image" t-options="{'widget': 'image', 'resize': None if product_image_big else '300x300'}" />
                                    </a>
                                </div>
                                <div class="text-center">
                                    <h4>
                                        <a style="color:black;" itemprop="name" t-att-href="product_href" t-att-content="product.x_studio_website_label" t-field="product.x_studio_website_label" />
                                    </h4>
                                    <div itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/Offer" class="product_price">
                                        <b>
                                            <t t-if="True">
                                                <!-- compatibility 12.0 -->
                                                <del t-attf-class="text-danger mr8 {{'' if combination_info['has_discounted_price'] else 'd-none'}}" style="white-space: nowrap;" t-esc="combination_info['list_price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}" />
                                            </t>
                                            <span t-if="combination_info['price']" t-esc="combination_info['price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}" />
                                            <span itemprop="price" style="display:none;" t-esc="combination_info['price']" />
                                            <span itemprop="priceCurrency" style="display:none;" t-esc="website.currency_id.name" />
                                        </b>
                                    </div>
                                    <t t-set="product_variant_id" t-value="product._get_first_possible_variant_id()" />
                                    <input name="product_id" t-att-value="product_variant_id" type="hidden" />
                                    <t t-if="product_variant_id">
                                        <a href="#" role="button" class="btn btn-secondary a-submit" aria-label="Shopping cart" title="Shopping cart">
                                            <span class="fa fa-shopping-cart" />
                                        </a>
                                    </t>
                                       <div class="tot-rating" data-toggle="popover" style="width:250px;">
                                            <input type='hidden'  name="review_id" t-att-value="product.avg_review()" id="wk_rating_star"/>
                                            <input type='hidden' name="user_reviews" t-att-value="len(product.user_review)"/>
                                            <t t-set="user_reviews" t-value="len(product.user_review)"/>
                                            <t t-set="val" t-value="product.avg_review()"/>
                                                    <t t-if="val != 0" >
                                                        <!--<input id="input-5a" class="rating form-control d-none"  t-attf-value="#{product.avg_review()}" data-show-clear="false" data-show-caption="false" data-min="0" data-max="5" data-step="0.1" data-readonly="true" data-size="xxs" data-symbol="&#xf005;" data-glyphicon="false" data-rating-class="rating-fa"/>-->
							<span class="text-center;" style="color:#FF9643;text-align:center;">
                                                        <t t-foreach="range(4)" t-as="i">
                                                           <t t-if="product.avg_review() &gt;= i+1"><span class="fa fa-star" style="color:#FF9643;"/></t>
                                                           <t t-elif="product.avg_review() &lt; i+1 and product.avg_review() &gt; i"><span class="fa fa-star-half-o"/></t>
                                                           <t t-else=""><span class="fa fa-star-o"/></t>
                                                        </t>
                                                        <br/>
                                                        </span>
                                                    </t>
                                        </div>
                                        <!--
                                        <t t-set="in_wish" t-value="product._is_in_wishlist()" />
                                        <button t-if="product_variant_id" type="button" role="button" class="btn btn-secondary o_add_wishlist" t-att-disabled='in_wish or None' title="Add to Wishlist" t-att-data-product-template-id="product.id" t-att-data-product-product-id="product_variant_id" data-action="o_wishlist"><span class="fa fa-heart" role="img" aria-label="Add to wishlist"></span></button>
                                        -->
                                </div>
                            </div>
                        </form>
                    </div>
                </t>
            </div>
        </t>
         <script>
        		$(".for-js-rating").rating();
			    $("abbr.timeago").timeago();
        	</script>
    </template>
    <!-- No product here, template -->
    <template id="no_products">
        <div class="container readable">
            <div class="alert alert-warning alert-dismissible text-center" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&#215;</span>
                </button>
                <h3>No products here...</h3>
                <p>Please, be sure that your products are published.</p>
            </div>
        </div>
    </template>
    <template id="s_latest_products_place_in_tab" inherit_id="website.snippets">
        <xpath expr="//div[@id='snippet_feature']/div[hasclass('o_panel_body')]/t" position="before">
            <t t-snippet="website_product_snippet.s_latest_products" t-thumbnail="/website_product_snippet/static/src/img/s_product_snippet.png" />
        </xpath>
    </template>
    <!-- Snippet's Options -->
    <template id="s_latest_products_option" inherit_id="website.snippet_options">
        <xpath expr="//div[@data-js='background']" position="before">
            <div data-js="js_get_products_selectSlider" data-selector=".js_get_products">
                <div class="dropdown-submenu">
                    <a tabindex="-1" href="#" class="dropdown-item">Product Type</a>
                    <div class="dropdown-menu">
                        <a href="#" class="dropdown-item" data-filter_by_slider_id="0" data-no-preview="true">All Products</a>
                        <!-- the blog list will be generated in js -->
                    </div>
                </div>
            </div>
            <div data-js="js_get_products_limit" data-selector=".js_get_products">
                <div class="dropdown-submenu">
                    <a tabindex="-1" href="#" class="dropdown-item">Number of products</a>
                    <div class="dropdown-menu" data-no-preview="true">
                        <a href="#" class="dropdown-item" data-products_limit="1">1 product</a>
                        <a href="#" class="dropdown-item" data-products_limit="2">2 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="3">3 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="4">4 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="5">5 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="6">6 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="7">7 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="8">8 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="9">9 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="10">10 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="11">11 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="12">13 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="14">14 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="15">15 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="16">16 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="17">17 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="18">18 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="19">19 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="20">20 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="21">21 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="22">22 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="23">23 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="24">24 products</a>
                        <a href="#" class="dropdown-item" data-products_limit="25">25 products</a>
                    </div>
                </div>
            </div>
            <div data-js="js_get_product_items_display" data-selector=".js_get_products">
                <div class="dropdown-submenu">
                    <a tabindex="-1" href="#" class="dropdown-item">Number of Items Display</a>
                    <div class="dropdown-menu" data-no-preview="true">
                        <a href="#" class="dropdown-item" data-product_items="1">1 item</a>
                        <a href="#" class="dropdown-item" data-product_items="2">2 items</a>
                        <a href="#" class="dropdown-item" data-product_items="3">3 items</a>
                        <a href="#" class="dropdown-item" data-product_items="4">4 items</a>
                        <a href="#" class="dropdown-item" data-product_items="5">5 items</a>
                        <a href="#" class="dropdown-item" data-product_items="6">6 items</a>
                        <a href="#" class="dropdown-item" data-product_items="7">7 items</a>
                        <a href="#" class="dropdown-item" data-product_items="8">8 items</a>
                    </div>
                </div>
            </div>
        </xpath>
       
    </template>
</odoo>